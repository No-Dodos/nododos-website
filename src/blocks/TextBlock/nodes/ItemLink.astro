---
import InternalLink from '@blocks/InternalLink/InternalLink.astro';
// import type { InternalLinkFragment } from '@lib/types/datocms';

type AnyPage = {
  __typename: string;
  id: string;
  title?: string;
  [key: string]: any;
}
type Node = {
  meta?: {
    id: string;
    value: string;
  }[];
};
type Props = {
  node: Node;
  link: AnyPage;
};

const { node, link: page } = Astro.props;
const openInNewTab = Boolean(node.meta?.find(entry => entry.id === 'target' && entry.value === '_blank'));
---

<InternalLink page={ page } {openInNewTab}>
  <slot />
</InternalLink>
